/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[26,8,9,10,24,25],{698:function(t,e,n){var content=n(714);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(132).default)("1970c278",content,!0,{sourceMap:!1})},699:function(t,e,n){var content=n(716);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(132).default)("8d7b38a8",content,!0,{sourceMap:!1})},700:function(t,e,n){"use strict";n.r(e);var o=n(702),l={props:{showPopup:{type:Boolean,default:!1},title:{type:String,default:""},showTitle:{type:Boolean,default:!1},closeOut:{type:Boolean,default:!1},width:{type:String,default:"auto"}},components:{DxPopup:o.DxPopup},methods:{contentReady:function(t){t.component.content().style.padding="10px 24px"}}},r=n(77),component=Object(r.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("DxPopup",{attrs:{visible:t.showPopup,"drag-enabled":!1,"close-on-outside-click":t.closeOut,"show-close-button":!0,"show-title":t.showTitle,height:"auto",width:t.width,title:t.title},on:{contentReady:t.contentReady}},[n("div",[t._t("header")],2),t._v(" "),n("div",[t._t("main")],2),t._v(" "),n("div",[t._t("footer")],2)])}),[],!1,null,"0cb25e42",null);e.default=component.exports},701:function(t,e,n){"use strict";n.r(e);var o=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mx-2"},[e("img",{attrs:{src:n(712),width:"60px",height:"auto"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"xs6 text-xs-center container-xs",staticStyle:{"border-left":"1px solid black"}},[n("h2",[t._v("\n            PHIẾU ĐỀ NGHỊ MUA "),n("br"),t._v("\n            HÀNG HÓA,DỊCH VỤ\n        ")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"top"},[n("p",[t._v("Form: VNAS-TC-MH")]),t._v(" "),n("p",[t._v("ĐNMH-210325")])])}],l={props:{maNhanVien:{type:String,default:""},ycmh:{type:Object,default:{}}}},r=(n(713),n(77)),component=Object(r.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header row align-center"},[n("div",{staticClass:"xs4"},[n("div",{staticClass:"row align-center justify-center px-2"},[t._m(0),t._v(" "),t.maNhanVien.includes("VNASWO")?n("div",[n("p",{staticClass:"font-12",staticStyle:{"font-weight":"bold"}},[t._v("\n                    Công ty cổ phần VNAS Workshop\n                ")]),t._v(" "),n("p",{staticClass:"font-12"},[t._v("\n                    Điểm công nghiệp Di Trạch, Di Trạch, Hoài Đức, Hà Nội\n                ")]),t._v(" "),n("p",{staticClass:"font-12"},[t._v("MST: 0109687775")])]):t.maNhanVien.includes("VNASSE")?n("div",[n("p",{staticClass:"font-12",staticStyle:{"font-weight":"bold"}},[t._v("\n                    Công ty cổ phần VNAS Services\n                ")]),t._v(" "),n("p",{staticClass:"font-12"},[t._v("\n                    Xóm 12, Thôn Hậu Ái, Xã Vân Canh, Huyện Hoài Đức, Thành\n                    Phố Hà Nội\n                ")]),t._v(" "),n("p",{staticClass:"font-12"},[t._v("MST: 0109529056")])]):t.maNhanVien.includes("VNASG")?n("div",[n("p",{staticClass:"font-12",staticStyle:{"font-weight":"bold"}},[t._v("\n                    Công ty Cổ phần tập đoàn Việt Nam Auto Solutions\n                ")]),t._v(" "),n("p",{staticClass:"font-12"},[t._v("\n                    Số 16, ngách 53/59/50 đường Ngọa Long, phường Minh Khai,\n                    Bắc Từ Liêm, Hà Nội\n                ")]),t._v(" "),n("p",{staticClass:"font-12"},[t._v("MST: 0108326399")])]):n("div",[n("p",{staticClass:"font-12",staticStyle:{"font-weight":"bold"}},[t._v("\n                    Công ty TNHH Việt Nam Auto Solutions\n                ")]),t._v(" "),n("p",{staticClass:"font-12"},[t._v("\n                    Thôn An Trai, Xã Vân Canh, Huyện Hoài Đức, Thành Phố Hà\n                    Nội\n                ")]),t._v(" "),n("p",{staticClass:"font-12"},[t._v("MST: 0106515898")])])])]),t._v(" "),t._m(1),t._v(" "),n("div",{staticClass:"xs2 right-content"},[t._m(2),t._v(" "),n("div",{staticClass:"bot"},[n("p",[t._v("Số: "+t._s(t.ycmh.id))])])])])}),o,!1,null,"521d2cf8",null);e.default=component.exports},702:function(t,e,n){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.DxToolbarItem=e.DxTo=e.DxShow=e.DxPosition=e.DxOffset=e.DxMy=e.DxHide=e.DxFrom=e.DxCollision=e.DxBoundaryOffset=e.DxAt=e.DxAnimation=e.DxPopup=void 0;var l=o(n(316)),r=n(138),d=n(138),c=r.createComponent({props:{accessKey:String,animation:Object,closeOnOutsideClick:[Boolean,Function],container:{},contentTemplate:{},copyRootClassesToWrapper:Boolean,deferRendering:Boolean,disabled:Boolean,dragAndResizeArea:{},dragEnabled:Boolean,dragOutsideBoundary:Boolean,elementAttr:{},focusStateEnabled:Boolean,fullScreen:Boolean,height:[Function,Number,String],hideOnParentScroll:Boolean,hint:String,hoverStateEnabled:Boolean,maxHeight:[Function,Number,String],maxWidth:[Function,Number,String],minHeight:[Function,Number,String],minWidth:[Function,Number,String],onContentReady:Function,onDisposing:Function,onHidden:Function,onHiding:Function,onInitialized:Function,onOptionChanged:Function,onResize:Function,onResizeEnd:Function,onResizeStart:Function,onShowing:Function,onShown:Function,onTitleRendered:Function,position:[Function,Object,String],resizeEnabled:Boolean,restorePosition:Boolean,rtlEnabled:Boolean,shading:Boolean,shadingColor:String,showCloseButton:Boolean,showTitle:Boolean,tabIndex:Number,title:String,titleTemplate:{},toolbarItems:Array,visible:Boolean,width:[Function,Number,String],wrapperAttr:{}},emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:animation":null,"update:closeOnOutsideClick":null,"update:container":null,"update:contentTemplate":null,"update:copyRootClassesToWrapper":null,"update:deferRendering":null,"update:disabled":null,"update:dragAndResizeArea":null,"update:dragEnabled":null,"update:dragOutsideBoundary":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:fullScreen":null,"update:height":null,"update:hideOnParentScroll":null,"update:hint":null,"update:hoverStateEnabled":null,"update:maxHeight":null,"update:maxWidth":null,"update:minHeight":null,"update:minWidth":null,"update:onContentReady":null,"update:onDisposing":null,"update:onHidden":null,"update:onHiding":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:onResize":null,"update:onResizeEnd":null,"update:onResizeStart":null,"update:onShowing":null,"update:onShown":null,"update:onTitleRendered":null,"update:position":null,"update:resizeEnabled":null,"update:restorePosition":null,"update:rtlEnabled":null,"update:shading":null,"update:shadingColor":null,"update:showCloseButton":null,"update:showTitle":null,"update:tabIndex":null,"update:title":null,"update:titleTemplate":null,"update:toolbarItems":null,"update:visible":null,"update:width":null,"update:wrapperAttr":null},computed:{instance:function(){return this.$_instance}},beforeCreate:function(){this.$_WidgetClass=l.default,this.$_hasAsyncTemplate=!0,this.$_expectedChildren={animation:{isCollectionItem:!1,optionName:"animation"},position:{isCollectionItem:!1,optionName:"position"},toolbarItem:{isCollectionItem:!0,optionName:"toolbarItems"}}}});e.DxPopup=c;var h=d.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:hide":null,"update:show":null},props:{hide:[Object,Number,String],show:[Object,Number,String]}});e.DxAnimation=h,h.$_optionName="animation",h.$_expectedChildren={hide:{isCollectionItem:!1,optionName:"hide"},show:{isCollectionItem:!1,optionName:"show"}};var m=d.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:String,y:String}});e.DxAt=m,m.$_optionName="at";var f=d.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:Number,y:Number}});e.DxBoundaryOffset=f,f.$_optionName="boundaryOffset";var v=d.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:String,y:String}});e.DxCollision=v,v.$_optionName="collision";var x=d.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:left":null,"update:opacity":null,"update:position":null,"update:scale":null,"update:top":null},props:{left:Number,opacity:Number,position:Object,scale:Number,top:Number}});e.DxFrom=x,x.$_optionName="from",x.$_expectedChildren={position:{isCollectionItem:!1,optionName:"position"}};var C=d.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:complete":null,"update:delay":null,"update:direction":null,"update:duration":null,"update:easing":null,"update:from":null,"update:staggerDelay":null,"update:start":null,"update:to":null,"update:type":null},props:{complete:Function,delay:Number,direction:String,duration:Number,easing:String,from:Object,staggerDelay:Number,start:Function,to:Object,type:String}});e.DxHide=C,C.$_optionName="hide",C.$_expectedChildren={from:{isCollectionItem:!1,optionName:"from"},to:{isCollectionItem:!1,optionName:"to"}};var y=d.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:String,y:String}});e.DxMy=y,y.$_optionName="my";var D=d.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:Number,y:Number}});e.DxOffset=D,D.$_optionName="offset";var _=d.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:at":null,"update:boundary":null,"update:boundaryOffset":null,"update:collision":null,"update:my":null,"update:of":null,"update:offset":null},props:{at:[Object,String],boundary:{},boundaryOffset:[Object,String],collision:[Object,String],my:[Object,String],of:{},offset:[Object,String]}});e.DxPosition=_,_.$_optionName="position";var H=d.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:complete":null,"update:delay":null,"update:direction":null,"update:duration":null,"update:easing":null,"update:from":null,"update:staggerDelay":null,"update:start":null,"update:to":null,"update:type":null},props:{complete:Function,delay:Number,direction:String,duration:Number,easing:String,from:Object,staggerDelay:Number,start:Function,to:Object,type:String}});e.DxShow=H,H.$_optionName="show";var w=d.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:left":null,"update:opacity":null,"update:position":null,"update:scale":null,"update:top":null},props:{left:Number,opacity:Number,position:Object,scale:Number,top:Number}});e.DxTo=w,w.$_optionName="to";var M=d.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:disabled":null,"update:html":null,"update:location":null,"update:options":null,"update:template":null,"update:text":null,"update:toolbar":null,"update:visible":null,"update:widget":null},props:{disabled:Boolean,html:String,location:String,options:{},template:{},text:String,toolbar:String,visible:Boolean,widget:String}});e.DxToolbarItem=M,M.$_optionName="toolbarItems",M.$_isCollectionItem=!0,e.default=c},712:function(t,e,n){t.exports=n.p+"img/logo.5d888dd.png"},713:function(t,e,n){"use strict";n(698)},714:function(t,e,n){var o=n(131)(!1);o.push([t.i,".right-content[data-v-521d2cf8]{font-style:italic;border-left:1px solid #000}.top[data-v-521d2cf8]{border-bottom:1px solid #000}.bot[data-v-521d2cf8],.top[data-v-521d2cf8]{padding:3px}",""]),t.exports=o},715:function(t,e,n){"use strict";n(699)},716:function(t,e,n){var o=n(131)(!1);o.push([t.i,".footer-content p[data-v-28aaa699]{font-weight:700}.footer-content span[data-v-28aaa699]{font-weight:400}.footer-content[data-v-28aaa699]{height:90px;border:1px solid #1a1a1a;padding:8px}.hide[data-v-28aaa699]{display:none}.cho-duyet[data-v-28aaa699]{height:90px;border:1px solid #1a1a1a;margin:0 auto}",""]),t.exports=o},717:function(t,e,n){"use strict";n.r(e);var o=n(319),l=n(10),r=n.n(l),d={props:{ycmh:{type:Object,default:{}}},data:function(){return{dataDuyet:[]}},methods:{timestamp:function(t){return r()(t).add(7,"hours").format("HH:mm DD/MM/YYYY")}},beforeUpdate:function(){this.dataDuyet=[];for(var t=[],e=this.ycmh.hasOwnProperty("duyetYCMHsNoiBo")?Object(o.a)(this.ycmh.duyetYCMHsNoiBo):Object(o.a)(this.ycmh.duyetYCMHs),i=e.length-1;i>=0;i--){var n=e[i];if("MustRevise"===n.approvalStatus)return;if(t.push(n),"TBP_DUYET"===n.approvalState)break}return this.dataDuyet=t.reverse()}},c=(n(715),n(77)),component=Object(c.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"row align-center mb-2"},[n("div",{staticClass:"footer-content column justify-space-between text-xs-center xs3"},[n("p",{staticStyle:{"text-decoration":"underline"}},[t._v("Người yêu cầu:")]),t._v(" "),n("div",[n("span",[t._v(t._s(t.ycmh.tenNhanVien))]),t._v(" "),n("p",[t._v("\n                    Thời gian:\n                    "),n("span",[t._v(t._s(t.timestamp(t.ycmh.ngayDeTrinh)))])])])]),t._v(" "),t.ycmh.hasOwnProperty("duyetYCMHs")||t.ycmh.hasOwnProperty("duyetYCMHsNoiBo")?n("div",{staticClass:"row"},t._l(t.dataDuyet,(function(e){return n("div",{key:e.id,class:"MustRevise"===e.approvalStatus?"hide xs3":"xs3",style:"NVTC_DUYET"===e.approvalState||"MH_DUYET"===e.approvalState?"display:none":""},["TBP_DUYET"===e.approvalState&&"None"===e.approvalStatus?n("div",[n("div",{staticClass:"cho-duyet row justify-center align-center"},[n("p",[t._v(t._s(e.tenNhanVien)+"...")])])]):n("div",{staticClass:"footer-content column justify-space-between text-xs-center"},[n("p",{staticStyle:{"text-decoration":"underline"}},[t._v("\n                        "+t._s("TBP_DUYET"==e.approvalState?"Trưởng bộ phận":"GDTC_DUYET"==e.approvalState?"Bộ phận tài chính":"TGD_DUYET"==e.approvalState?"Ban giám đốc":"PMH_DUYET"==e.approvalState?"Bộ phận mua hàng":"")+":\n                    ")]),t._v(" "),n("p",[t._v("\n                        "+t._s("Approval"==e.approvalStatus?"(Approved by VNAS App)":"")+"\n                    ")]),t._v(" "),n("div",[n("span",[t._v(t._s(e.tenNhanVien))]),t._v(" "),n("p",[t._v("\n                            Thời gian:\n                            "),n("span",[t._v(t._s(t.timestamp(e.ngayDuyet)))])])])])])})),0):t._e()])])}),[],!1,null,"28aaa699",null);e.default=component.exports},723:function(t,e,n){var content=n(733);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(132).default)("99c870b8",content,!0,{sourceMap:!1})},724:function(t,e,n){var content=n(735);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(132).default)("2032afb2",content,!0,{sourceMap:!1})},732:function(t,e,n){"use strict";n(723)},733:function(t,e,n){var o=n(131)(!1);o.push([t.i,".header[data-v-e62dca96]{border:1px solid #000}.btn-tool[data-v-e62dca96]{border:1px solid #ddd;padding:0 5px;border-radius:4px;cursor:pointer}.btn-tool[data-v-e62dca96],.btn-tool[data-v-e62dca96]:hover{transition:all .2s linear 0s}.btn-tool[data-v-e62dca96]:hover{background-color:#000;color:#ddd}",""]),t.exports=o},734:function(t,e,n){"use strict";n(724)},735:function(t,e,n){var o=n(131)(!1);o.push([t.i,".btn-add[data-v-4d87e7b1]{font-size:28px}.btn-save[data-v-4d87e7b1]{background-color:#0986c5;color:#fff;padding:8px 0;width:60px;text-align:center;cursor:pointer;border-radius:6px}.btn-save[data-v-4d87e7b1],.btn-save[data-v-4d87e7b1]:hover{transition:all .2s linear 0s}.btn-save[data-v-4d87e7b1]:hover{color:#0986c5;background-color:#f1f1f1}.xs-4[data-v-4d87e7b1]{flex-basis:34.6%;max-width:34.6%}.btn-tool[data-v-4d87e7b1]{border:1px solid #ddd;padding:0 5px;border-radius:4px;cursor:pointer}.btn-tool[data-v-4d87e7b1],.btn-tool[data-v-4d87e7b1]:hover{transition:all .2s linear 0s}.btn-tool[data-v-4d87e7b1]:hover{background-color:#000;color:#ddd}",""]),t.exports=o},736:function(t,e,n){var content=n(763);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(132).default)("7c3221e8",content,!0,{sourceMap:!1})},744:function(t,e,n){"use strict";n.r(e);n(79),n(59),n(78),n(105),n(106);var o=n(707),l=n(50),r=(n(42),n(66),n(113),n(133),n(169),n(315)),d=n.n(r),c=n(704),h=n.n(c),m=n(314),f=n.n(m),v=n(705),x=n.n(v),C=n(313),y=n.n(C),D=n(697),_=n(95),H=n(708),w=n.n(H),M=n(709),T=n.n(M),V=n(710),$=n(10),S=n.n($),P=n(701),N=n(717);function O(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function Y(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?O(Object(source),!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):O(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var B={components:{DxSelectBox:d.a,DxTextBox:f.a,DxDateBox:x.a,DxDataGrid:D.DxDataGrid,DxColumn:D.DxColumn,DxTotalItem:D.DxTotalItem,DxNumberBox:h.a,DxButton:y.a,DxLookup:D.DxLookup,DxSummary:D.DxSummary,DxEditing:D.DxEditing,DxValidator:w.a,DxRequiredRule:H.DxRequiredRule,DxValidationGroup:T.a,DxAutocomplete:V.DxAutocomplete,dnmh:P.default,lichSuDuyet:N.default},data:function(){return{dataGridRefKey:"datagridValid",formValidation:"formValid",selectBoxRefKey:"BoxRefKey",YeuCauMuaHang:{},loaiPhuPhi:[this.$t("Phát sinh"),this.$t("Theo tính toán")],disable:!0,allowEdit:!1,mnv:""}},watch:{suaYeuCau:{handler:function(t){t&&(this.YeuCauMuaHang=Y({},t),this.mnv=this.YeuCauMuaHang.maNhanVien)},immediate:!0,deep:!0},refNumber:{handler:function(t){t&&0==this.disable&&(this.YeuCauMuaHang.soThamChieu=t.soThamChieu,this.YeuCauMuaHang.maChiPhi=t.maChiPhi)},immediate:!0}},computed:Y(Y(Y(Y({},Object(_.c)("muahang",["listItem","refNumber","isApprove"])),Object(_.c)(["projectCode","hangMucTrienKhai"])),Object(_.b)("muahang",["suaYeuCau","danhSachHangHoa"])),{},{validationGroup:function(){return this.$refs[this.formValidation].instance},selectBox:function(){return this.$refs[this.selectBoxRefKey].instance}}),methods:{addRow:function(){return this.$refs[this.dataGridRefKey].instance.addRow()},checkEdit:function(){this.disable=!this.disable,this.allowEdit=!this.allowEdit},saved:function(){var t=this.$refs[this.dataGridRefKey].instance.getDataSource()._items;this.YeuCauMuaHang.yeuCauMuaHangChiTiets=t},editorPreparing:function(t){"tenHangHoa_DichVu"===t.dataField&&(t.editorName="dxAutocomplete",t.editorOptions={items:this.listItem,valueExpr:"name",value:t.value,onValueChanged:function(e){t.setValue(e.value)},onSelectionChanged:function(e){var n=e.selectedItem;null!=n.model&&(t.row.data.model_MaHieu=n.model,t.row.data.xuatXu_Hang=n.tenHangSanXuat,t.row.data.donVi=n.donViTinh,t.row.data.donGiaTamTinh=n.donGiaVND)}})},checkArray:function(){return this.YeuCauMuaHang.yeuCauMuaHangChiTiets.forEach((function(t){return t.tenHangHoa_DichVu,t.model_MaHieu,t.xuatXu_Hang,t.soLuong,t.donVi,t.donGiaTamTinh,t.maHangMucTrienKhai,Object(o.a)("conditionsArray")})),![].includes(!1)},selectDuAn:function(t){this.YeuCauMuaHang.maDuAn=t.selectedItem,null!==t.selectedItem&&(this.$store.dispatch("muahang/getRefNumber",t.selectedItem),this.$store.dispatch("getHangMuc",t.selectedItem))},selectPhuPhi:function(t){this.YeuCauMuaHang.phuPhi=t.selectedItem},clickSave:function(){var t=this,e=confirm("Do you want to submit?"),n=this.validationGroup.validate(),o=this.YeuCauMuaHang.yeuCauMuaHangChiTiets;e&&(n.isValid&&o.length>0?setTimeout((function(){t.checkArray()?(t.$store.dispatch("muahang/editData",t.YeuCauMuaHang),t.clickClose()):t.$toast.error("Failed! Not enough information to save")}),300):this.$toast.error("Failed! Not enough information to save"))},duyet:function(){1==confirm("Do you want to submit?")&&(this.$store.dispatch("pheduyet/postApprove",this.YeuCauMuaHang),this.clickClose())},khongDuyet:function(){1==confirm("Do you want to submit?")&&(this.$store.dispatch("pheduyet/postRevise",this.YeuCauMuaHang),this.clickClose())},clickClose:function(){this.disable=!0,this.allowEdit=!1,this.$emit("invisible")},customFormat:function(t){return new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(t)},calculateAmount:function(t){return t.soLuong*t.donGiaTamTinh},timestamp:function(t){return S()(t).add(7,"hours").format("HH:mm DD/MM/YYYY")}},created:function(){this.$store.dispatch("muahang/getItems"),this.$store.dispatch("getProjectCode")}},R=(n(732),n(77)),component=Object(R.a)(B,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"row justify-end"},[n("div",[n("div",{staticClass:"row"},[n("div",{staticClass:"font-24 btn-tool mdi mdi-pencil mr-2",on:{click:t.checkEdit}}),t._v(" "),0==t.disable&&1==t.allowEdit?n("div",[n("div",{staticClass:"font-24 btn-tool mdi mdi-check mx-2",on:{click:t.clickSave}})]):t._e()])]),t._v(" "),n("div",[n("div",{staticClass:"font-24 btn-tool mdi mdi-close",on:{click:t.clickClose}})])]),t._v(" "),n("dnmh",{attrs:{maNhanVien:t.mnv,ycmh:t.YeuCauMuaHang}}),t._v(" "),n("div",{staticClass:"header"},[n("DxValidationGroup",{ref:t.formValidation},[n("div",{staticClass:"row"},[n("div",{staticClass:"xs4 mr-4"},[n("div",{staticClass:"row align-center justify-space-between"},[n("p",[t._v("Tên:")]),t._v(" "),n("DxTextBox",{attrs:{"styling-mode":"underlined","read-only":t.disable},model:{value:t.YeuCauMuaHang.tenNhanVien,callback:function(e){t.$set(t.YeuCauMuaHang,"tenNhanVien",e)},expression:"YeuCauMuaHang.tenNhanVien"}},[n("DxValidator",[n("DxRequiredRule")],1)],1)],1),t._v(" "),n("div",{staticClass:"row align-center justify-space-between"},[n("p",[t._v("Mã nhân viên:")]),t._v(" "),n("DxTextBox",{attrs:{"styling-mode":"underlined","read-only":t.disable},model:{value:t.YeuCauMuaHang.maNhanVien,callback:function(e){t.$set(t.YeuCauMuaHang,"maNhanVien",e)},expression:"YeuCauMuaHang.maNhanVien"}},[n("DxValidator",[n("DxRequiredRule")],1)],1)],1),t._v(" "),n("div",{staticClass:"row align-center justify-space-between"},[n("p",[t._v("Ngày đệ trình:")]),t._v(" "),n("DxDateBox",{attrs:{displayFormat:"dd/MM/yyyy","use-mask-behavior":!0,validationMessageMode:"always","styling-mode":"underlined","read-only":t.disable},model:{value:t.YeuCauMuaHang.ngayDeTrinh,callback:function(e){t.$set(t.YeuCauMuaHang,"ngayDeTrinh",e)},expression:"YeuCauMuaHang.ngayDeTrinh"}},[n("DxValidator",[n("DxRequiredRule")],1)],1)],1),t._v(" "),n("div",{staticClass:"row align-center justify-space-between"},[n("p",[t._v("Ngày giao hàng:")]),t._v(" "),n("DxDateBox",{attrs:{displayFormat:"dd/MM/yyyy","use-mask-behavior":!0,validationMessageMode:"always","styling-mode":"underlined","read-only":t.disable},model:{value:t.YeuCauMuaHang.ngayCanHang,callback:function(e){t.$set(t.YeuCauMuaHang,"ngayCanHang",e)},expression:"YeuCauMuaHang.ngayCanHang"}},[n("DxValidator",[n("DxRequiredRule")],1)],1)],1)]),t._v(" "),n("div",{staticClass:"xs4 mr-4"},[n("div",{staticClass:"row align-center justify-space-between"},[n("p",[t._v("Chức vụ:")]),t._v(" "),n("DxTextBox",{attrs:{"styling-mode":"underlined","read-only":t.disable},model:{value:t.YeuCauMuaHang.chucVu,callback:function(e){t.$set(t.YeuCauMuaHang,"chucVu",e)},expression:"YeuCauMuaHang.chucVu"}},[n("DxValidator",[n("DxRequiredRule")],1)],1)],1),t._v(" "),n("div",{staticClass:"row align-center justify-space-between"},[n("p",[t._v("Phòng/Ban:")]),t._v(" "),n("DxTextBox",{attrs:{"styling-mode":"underlined","read-only":t.disable},model:{value:t.YeuCauMuaHang.phongBan,callback:function(e){t.$set(t.YeuCauMuaHang,"phongBan",e)},expression:"YeuCauMuaHang.phongBan"}},[n("DxValidator",[n("DxRequiredRule")],1)],1)],1),t._v(" "),n("div",{staticClass:"row align-center justify-space-between"},[n("p",[t._v("Địa điểm làm việc:")]),t._v(" "),n("DxTextBox",{attrs:{"styling-mode":"underlined","read-only":t.disable},model:{value:t.YeuCauMuaHang.diaDiemLamViec,callback:function(e){t.$set(t.YeuCauMuaHang,"diaDiemLamViec",e)},expression:"YeuCauMuaHang.diaDiemLamViec"}},[n("DxValidator",[n("DxRequiredRule")],1)],1)],1)]),t._v(" "),n("div",{staticClass:"xs4"},[n("div",{staticClass:"row align-center justify-space-between"},[n("p",[t._v("Phụ phí:")]),t._v(" "),n("DxSelectBox",{attrs:{items:t.loaiPhuPhi,value:t.YeuCauMuaHang.phuPhi,"styling-mode":"underlined","read-only":t.disable},on:{selectionChanged:t.selectPhuPhi}},[n("DxValidator",[n("DxRequiredRule")],1)],1)],1),t._v(" "),n("div",{staticClass:"row align-center justify-space-between"},[n("p",[t._v("Mã dự án:")]),t._v(" "),n("DxSelectBox",{ref:t.selectBoxRefKey,attrs:{items:t.projectCode,value:t.YeuCauMuaHang.maDuAn,"styling-mode":"underlined","read-only":t.disable},on:{selectionChanged:t.selectDuAn}},[n("DxValidator",[n("DxRequiredRule")],1)],1)],1),t._v(" "),n("div",{staticClass:"row align-center justify-space-between"},[n("p",[t._v("Mã chi phí:")]),t._v(" "),n("DxTextBox",{attrs:{"styling-mode":"underlined","read-only":!0,width:220},model:{value:t.YeuCauMuaHang.maChiPhi,callback:function(e){t.$set(t.YeuCauMuaHang,"maChiPhi",e)},expression:"YeuCauMuaHang.maChiPhi"}},[n("DxValidator",[n("DxRequiredRule")],1)],1)],1),t._v(" "),n("div",{staticClass:"row align-center justify-space-between"},[n("p",[t._v("Số tham chiếu:")]),t._v(" "),n("DxTextBox",{attrs:{"styling-mode":"underlined","read-only":!0,width:220},model:{value:t.YeuCauMuaHang.soThamChieu,callback:function(e){t.$set(t.YeuCauMuaHang,"soThamChieu",e)},expression:"YeuCauMuaHang.soThamChieu"}},[n("DxValidator",[n("DxRequiredRule")],1)],1)],1)])])])],1),t._v(" "),n("div",[n("div",{staticClass:"row justify-space-between align-center"},[n("h3",{staticClass:"my-2"},[t._v("\n                "+t._s(t.$t("Danh sách hàng hóa, dịch vụ cần mua"))+"\n            ")]),t._v(" "),0==t.disable&&1==t.allowEdit?n("div",[n("DxButton",{attrs:{icon:"mdi mdi-plus","styling-mode":"text",hint:"Thêm hàng hoá"},on:{click:t.addRow}})],1):t._e()]),t._v(" "),n("DxDataGrid",{ref:t.dataGridRefKey,attrs:{id:"gridContainer","data-source":t.danhSachHangHoa,"show-borders":!0,"show-column-lines":!0,"show-row-lines":!0,"allow-column-resizing":!0,"column-auto-width":!0,"hover-state-enabled":!0,noDataText:t.$t("Không có dữ liệu"),height:"calc(100vh - 450px)"},on:{saved:t.saved,editorPreparing:t.editorPreparing}},[n("DxEditing",{attrs:{"allow-updating":t.allowEdit,"allow-deleting":t.allowEdit,useIcons:!0,"confirm-delete":!1,mode:"cell","new-row-position":"last"}}),t._v(" "),n("DxColumn",{attrs:{"data-field":"tenHangHoa_DichVu",caption:t.$t("Hàng hóa, dịch vụ")}}),t._v(" "),n("DxColumn",{attrs:{"data-field":"model_MaHieu",caption:t.$t("Mã hiệu")}}),t._v(" "),n("DxColumn",{attrs:{"data-field":"xuatXu_Hang",caption:t.$t("Xuất xứ")}}),t._v(" "),n("DxColumn",{attrs:{"data-field":"soLuong",caption:t.$t("Số lượng")}}),t._v(" "),n("DxColumn",{attrs:{"data-field":"donVi",caption:t.$t("Đơn vị")}}),t._v(" "),n("DxColumn",{attrs:{"data-field":"donGiaTamTinh",caption:t.$t("Đơn giá"),format:t.customFormat}}),t._v(" "),n("DxColumn",{attrs:{"data-field":"soTienTamTinh",caption:t.$t("Tổng tiền"),format:t.customFormat,"calculate-cell-value":t.calculateAmount}}),t._v(" "),n("DxColumn",{attrs:{"data-field":"maHangMucTrienKhai",caption:t.$t("Mã hạng mục triển khai")}},[n("DxLookup",{attrs:{"data-source":t.hangMucTrienKhai}})],1),t._v(" "),n("DxColumn",{attrs:{"data-field":"ghiChu",caption:t.$t("Ghi chú"),width:"250"}}),t._v(" "),n("DxSummary",[n("DxTotalItem",{attrs:{column:"tenHangHoa_DichVu","summary-type":"count","display-format":"Tổng tiền:"}}),t._v(" "),n("DxTotalItem",{attrs:{column:"soTienTamTinh","summary-type":"sum","display-format":"{0}",valueFormat:t.customFormat}})],1)],1)],1),t._v(" "),n("lichSuDuyet",{attrs:{ycmh:t.YeuCauMuaHang}}),t._v(" "),"MustRevise"===t.YeuCauMuaHang.approvalStatus?n("div",{staticClass:"row align-center"},[n("div",{staticClass:"mr-1",staticStyle:{"font-weight":"bold"}},[t._v("Ghi chú:")]),t._v(" "),n("div",[t._v("\n            "+t._s(t.YeuCauMuaHang.comment)+"\n        ")])]):t._e(),t._v(" "),1==t.isApprove?n("div",{staticClass:"row align-center"},[n("div",{staticClass:"xs10 row align-center"},[n("div",{staticClass:"xs1"},[t._v(t._s(t.$t("Ghi chú"))+":")]),t._v(" "),n("DxTextBox",{staticClass:"xs11",attrs:{"styling-mode":"underlined"},model:{value:t.YeuCauMuaHang.comment,callback:function(e){t.$set(t.YeuCauMuaHang,"comment",e)},expression:"YeuCauMuaHang.comment"}})],1),t._v(" "),n("div",{staticClass:"row justify-end align-center xs4"},[n("DxButton",{staticClass:"mr-3",attrs:{text:t.$t("Không duyệt"),type:"danger",icon:"close","styling-mode":"outlined"},on:{click:t.khongDuyet}}),t._v(" "),n("DxButton",{attrs:{type:"success",icon:"check",text:t.$t("Phê duyệt"),"styling-mode":"outlined"},on:{click:t.duyet}})],1)]):t._e()],1)}),[],!1,null,"e62dca96",null);e.default=component.exports;installComponents(component,{Dnmh:n(701).default})},745:function(t,e,n){"use strict";n.r(e);n(79),n(59),n(78),n(105),n(106);var o=n(16),l=n(707),r=n(50),d=(n(80),n(42),n(66),n(113),n(133),n(169),n(315)),c=n.n(d),h=n(704),m=n.n(h),f=n(314),v=n.n(f),x=n(705),C=n.n(x),y=n(313),D=n.n(y),_=n(697),H=n(708),w=n.n(H),M=n(709),T=n.n(M),V=n(710),$=n(95);function S(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function P(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?S(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):S(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var N={components:{DxSelectBox:c.a,DxTextBox:v.a,DxDateBox:C.a,DxDataGrid:_.DxDataGrid,DxColumn:_.DxColumn,DxScrolling:_.DxScrolling,DxPager:_.DxPager,DxPaging:_.DxPaging,DxNumberBox:m.a,DxLookup:_.DxLookup,DxButton:D.a,DxEditing:_.DxEditing,DxValidator:w.a,DxRequiredRule:H.DxRequiredRule,DxValidationGroup:T.a,DxAutocomplete:V.DxAutocomplete},data:function(){return{dataGridRefKey:"datagridValid",formValidation:"formValid",selectBoxRefKey:"BoxRefKey",selectBoxPhuPhi:"BoxPhuPhi",YeuCauMuaHang:{id:0,tenNhanVien:"",maNhanVien:"",chucVu:"",phongBan:"",ngayDeTrinh:(new Date).toISOString(),ngayCanHang:(new Date).toISOString(),diaDiemLamViec:"",phuPhi:"",maChiPhi:"",maDuAn:"",soThamChieu:"",comment:"",yeuCauMuaHangChiTiets:[]},loaiPhuPhi:[this.$t("Phát sinh"),this.$t("Theo tính toán")],file:""}},watch:{refNumber:{handler:function(t){t?(this.YeuCauMuaHang.soThamChieu=t.soThamChieu,this.YeuCauMuaHang.maChiPhi=t.maChiPhi):(this.YeuCauMuaHang.soThamChieu="",this.YeuCauMuaHang.maChiPhi="")}},dataExcel:{handler:function(t){t&&(this.YeuCauMuaHang.yeuCauMuaHangChiTiets=JSON.parse(JSON.stringify(t.yeuCauMuaHangChiTiets)))},deep:!0}},computed:P(P(P({},Object($.c)("muahang",["listItem","refNumber"])),Object($.c)(["userInfo","projectCode","hangMucTrienKhai","dataExcel"])),{},{validationGroup:function(){return this.$refs[this.formValidation].instance},selectBox:function(){return this.$refs[this.selectBoxRefKey].instance},RefPhuPhi:function(){return this.$refs[this.selectBoxPhuPhi].instance}}),methods:{addRow:function(){this.YeuCauMuaHang.yeuCauMuaHangChiTiets.push({id:0,ycmhId:0,tenHangHoa_DichVu:"",xuatXu_Hang:"",model_MaHieu:"",soLuong:0,donVi:"",donGiaTamTinh:0,maHangMucTrienKhai:"",ghiChu:""})},checkArray:function(){return this.YeuCauMuaHang.yeuCauMuaHangChiTiets.forEach((function(t){return t.tenHangHoa_DichVu,t.model_MaHieu,t.xuatXu_Hang,t.soLuong,t.donVi,t.maHangMucTrienKhai,t.donGiaTamTinh,Object(l.a)("conditionsArray")})),![].includes(!1)},clickAdd:function(){var t=this,e=confirm("Do you want to submit?"),n=this.validationGroup.validate(),o=this.YeuCauMuaHang.yeuCauMuaHangChiTiets;e&&(n.isValid&&o.length>0?setTimeout((function(){t.checkArray()?(t.$store.dispatch("muahang/postData",t.YeuCauMuaHang),t.clickClose()):t.$toast.error("Failed! Not enough information to save")}),300):this.$toast.error("Failed! Not enough information to save!"))},selectDuAn:function(t){this.YeuCauMuaHang.maDuAn=t.selectedItem,null!==t.selectedItem&&(this.$store.dispatch("muahang/getRefNumber",t.selectedItem),this.$store.dispatch("getHangMuc",t.selectedItem))},selectPhongBan:function(t){this.YeuCauMuaHang.phongBan=t.selectedItem.tenPhongBan},selectPhuPhi:function(t){this.YeuCauMuaHang.phuPhi=t.selectedItem},calculateAmount:function(t){return t.soLuong*t.donGiaTamTinh},customFormat:function(t){return new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(t)},editorPreparing:function(t){"tenHangHoa_DichVu"===t.dataField&&(t.editorName="dxAutocomplete",t.editorOptions={items:this.listItem,valueExpr:"name",value:t.value,onValueChanged:function(e){t.setValue(e.value)},onSelectionChanged:function(e){var n=e.selectedItem;if(null==n.model)return"";t.row.data.model_MaHieu=n.model,t.row.data.xuatXu_Hang=n.tenHangSanXuat,t.row.data.donVi=n.donViTinh,t.row.data.donGiaTamTinh=n.donGiaVND}})},submitFile:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=new FormData).append("file",t.file),""!==t.file&&t.$store.dispatch("uploadExcel",n);case 3:case"end":return e.stop()}}),e)})))()},handleFileUpload:function(){this.file=this.$refs.file.files[0]},clickClose:function(){this.resetData(),this.$emit("invisible")},resetData:function(){this.YeuCauMuaHang={id:0,tenNhanVien:this.userInfo.tenNhanVien,maNhanVien:this.userInfo.maNhanVien,chucVu:this.userInfo.chucVu,phongBan:this.userInfo.phongBan,ngayDeTrinh:(new Date).toISOString(),ngayCanHang:(new Date).toISOString(),diaDiemLamViec:this.userInfo.diaDiemLamViec,phuPhi:"",maChiPhi:"",maDuAn:"",soThamChieu:"",comment:"",yeuCauMuaHangChiTiets:[]},this.selectBox.reset(),this.RefPhuPhi.reset()}},created:function(){this.$store.dispatch("muahang/getItems"),this.$store.dispatch("getProjectCode"),this.YeuCauMuaHang.tenNhanVien=this.userInfo.tenNhanVien,this.YeuCauMuaHang.maNhanVien=this.userInfo.maNhanVien,this.YeuCauMuaHang.chucVu=this.userInfo.chucVu,this.YeuCauMuaHang.phongBan=this.userInfo.phongBan,this.YeuCauMuaHang.diaDiemLamViec=this.userInfo.diaDiemLamViec}},O=(n(734),n(77)),component=Object(O.a)(N,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"row justify-end"},[n("div",[n("div",{staticClass:"font-24 btn-tool mdi mdi-close",on:{click:t.clickClose}})])]),t._v(" "),n("DxValidationGroup",{ref:t.formValidation},[n("div",{staticClass:"row align-center justify-space-between mb-3"},[n("DxTextBox",{staticClass:"xs2 mr-3",attrs:{"styling-mode":"outlined",label:t.$t("Họ và tên"),"label-mode":"floating","read-only":!0},model:{value:t.YeuCauMuaHang.tenNhanVien,callback:function(e){t.$set(t.YeuCauMuaHang,"tenNhanVien",e)},expression:"YeuCauMuaHang.tenNhanVien"}},[n("DxValidator",[n("DxRequiredRule")],1)],1),t._v(" "),n("DxTextBox",{staticClass:"xs2 mr-3",attrs:{"styling-mode":"outlined",label:t.$t("Mã nhân viên"),"label-mode":"floating","read-only":!0},model:{value:t.YeuCauMuaHang.maNhanVien,callback:function(e){t.$set(t.YeuCauMuaHang,"maNhanVien",e)},expression:"YeuCauMuaHang.maNhanVien"}},[n("DxValidator",[n("DxRequiredRule")],1)],1),t._v(" "),n("DxTextBox",{staticClass:"xs2 mr-3",attrs:{"styling-mode":"outlined",label:t.$t("Chức vụ"),"label-mode":"floating","read-only":!0},model:{value:t.YeuCauMuaHang.chucVu,callback:function(e){t.$set(t.YeuCauMuaHang,"chucVu",e)},expression:"YeuCauMuaHang.chucVu"}},[n("DxValidator",[n("DxRequiredRule")],1)],1),t._v(" "),t.userInfo.listOfNhanVienPhongBan.length>1?n("DxSelectBox",{staticClass:"xs2 mr-3",attrs:{"data-source":t.userInfo.listOfNhanVienPhongBan,"display-expr":"tenPhongBan","styling-mode":"outlined",label:t.$t("Phòng ban"),"label-mode":"floating"},on:{selectionChanged:t.selectPhongBan}},[n("DxValidator",[n("DxRequiredRule")],1)],1):n("DxTextBox",{staticClass:"xs2 mr-3",attrs:{"styling-mode":"outlined",label:t.$t("Phòng ban"),"label-mode":"floating","read-only":!0},model:{value:t.YeuCauMuaHang.phongBan,callback:function(e){t.$set(t.YeuCauMuaHang,"phongBan",e)},expression:"YeuCauMuaHang.phongBan"}},[n("DxValidator",[n("DxRequiredRule")],1)],1),t._v(" "),n("DxSelectBox",{ref:t.selectBoxPhuPhi,staticClass:"xs2 mr-3",attrs:{items:t.loaiPhuPhi,"styling-mode":"outlined",label:t.$t("Phụ phí"),"label-mode":"floating"},on:{selectionChanged:t.selectPhuPhi}},[n("DxValidator",[n("DxRequiredRule")],1)],1),t._v(" "),n("DxTextBox",{staticClass:"xs2",attrs:{"styling-mode":"outlined",label:t.$t("Mã chi phí"),"label-mode":"floating","read-only":!0},model:{value:t.YeuCauMuaHang.maChiPhi,callback:function(e){t.$set(t.YeuCauMuaHang,"maChiPhi",e)},expression:"YeuCauMuaHang.maChiPhi"}},[n("DxValidator",[n("DxRequiredRule")],1)],1)],1),t._v(" "),n("div",{staticClass:"row align-center mb-2"},[n("DxDateBox",{staticClass:"xs2 mr-3",attrs:{displayFormat:"dd/MM/yyyy","use-mask-behavior":!0,validationMessageMode:"always","styling-mode":"outlined",label:t.$t("Ngày đệ trình"),"label-mode":"floating","read-only":!0},model:{value:t.YeuCauMuaHang.ngayDeTrinh,callback:function(e){t.$set(t.YeuCauMuaHang,"ngayDeTrinh",e)},expression:"YeuCauMuaHang.ngayDeTrinh"}},[n("DxValidator",[n("DxRequiredRule")],1)],1),t._v(" "),n("DxDateBox",{staticClass:"xs2 mr-3",attrs:{displayFormat:"dd/MM/yyyy","use-mask-behavior":!0,validationMessageMode:"always","styling-mode":"outlined",label:t.$t("Ngày cần hàng"),"label-mode":"floating"},model:{value:t.YeuCauMuaHang.ngayCanHang,callback:function(e){t.$set(t.YeuCauMuaHang,"ngayCanHang",e)},expression:"YeuCauMuaHang.ngayCanHang"}},[n("DxValidator",[n("DxRequiredRule")],1)],1),t._v(" "),n("DxTextBox",{staticClass:"xs-4 mr-3",attrs:{"styling-mode":"outlined",label:t.$t("Địa điểm làm việc"),"label-mode":"floating"},model:{value:t.YeuCauMuaHang.diaDiemLamViec,callback:function(e){t.$set(t.YeuCauMuaHang,"diaDiemLamViec",e)},expression:"YeuCauMuaHang.diaDiemLamViec"}},[n("DxValidator",[n("DxRequiredRule")],1)],1),t._v(" "),n("DxSelectBox",{ref:t.selectBoxRefKey,staticClass:"xs2 mr-3",attrs:{items:t.projectCode,"styling-mode":"outlined",label:t.$t("Mã dự án"),"label-mode":"floating","search-enabled":!0,"search-mode":"contains","search-timeout":200,"min-search-length":0},on:{selectionChanged:t.selectDuAn}},[n("DxValidator",[n("DxRequiredRule")],1)],1),t._v(" "),n("DxTextBox",{staticClass:"xs2",attrs:{"styling-mode":"outlined",label:t.$t("Số tham chiếu"),"label-mode":"floating","read-only":!0},model:{value:t.YeuCauMuaHang.soThamChieu,callback:function(e){t.$set(t.YeuCauMuaHang,"soThamChieu",e)},expression:"YeuCauMuaHang.soThamChieu"}},[n("DxValidator",[n("DxRequiredRule")],1)],1)],1)]),t._v(" "),n("div",[n("div",{staticClass:"row mb-2 justify-space-between align-center"},[n("h3",[t._v(t._s(t.$t("Danh sách hàng hóa, dịch vụ cần mua")))]),t._v(" "),n("div",[n("input",{ref:"file",attrs:{type:"file",id:"file"},on:{change:function(e){return t.handleFileUpload()}}}),t._v(" "),n("button",{staticClass:"mr-2",on:{click:function(e){return t.submitFile()}}},[t._v("\n                    "+t._s(t.$t("Nhập"))+"\n                ")]),t._v(" "),n("button",{on:{click:function(e){return t.$store.dispatch("downloadExcel")}}},[t._v("\n                    "+t._s(t.$t("Tải mẫu Excel"))+"\n                ")])])]),t._v(" "),n("DxDataGrid",{ref:t.dataGridRefKey,attrs:{id:"gridContainer","data-source":t.YeuCauMuaHang.yeuCauMuaHangChiTiets,"show-borders":!0,"show-column-lines":!0,"allow-column-resizing":!0,"column-auto-width":!0,height:"calc(100vh - 320px)",noDataText:t.$t("Không có dữ liệu"),"remote-operations":!0},on:{editorPreparing:t.editorPreparing}},[n("DxEditing",{attrs:{"allow-updating":!0,"allow-deleting":!0,useIcons:!0,confirmDelete:!1,mode:"cell","new-row-position":"last"}}),t._v(" "),n("DxColumn",{attrs:{"data-field":"tenHangHoa_DichVu",caption:t.$t("Hàng hóa, dịch vụ")}}),t._v(" "),n("DxColumn",{attrs:{"data-field":"model_MaHieu",caption:t.$t("Mã hiệu")}}),t._v(" "),n("DxColumn",{attrs:{"data-field":"xuatXu_Hang",caption:t.$t("Xuất xứ")}}),t._v(" "),n("DxColumn",{attrs:{"data-field":"soLuong",caption:t.$t("Số lượng")}}),t._v(" "),n("DxColumn",{attrs:{"data-field":"donVi",caption:t.$t("Đơn vị")}}),t._v(" "),n("DxColumn",{attrs:{"data-field":"donGiaTamTinh",caption:t.$t("Đơn giá"),format:t.customFormat}}),t._v(" "),n("DxColumn",{attrs:{"data-field":"soTienTamTinh",caption:t.$t("Tổng tiền"),format:t.customFormat,"calculate-cell-value":t.calculateAmount}}),t._v(" "),n("DxColumn",{attrs:{"data-field":"maHangMucTrienKhai",caption:t.$t("Mã hạng mục triển khai")}},[n("DxLookup",{attrs:{"data-source":t.hangMucTrienKhai}})],1),t._v(" "),n("DxColumn",{attrs:{"data-field":"ghiChu",caption:t.$t("Ghi chú"),width:"250"}})],1),t._v(" "),n("div",{staticClass:"row justify-space-between mt-3"},[n("DxButton",{attrs:{icon:"mdi mdi-plus","use-submit-behavior":!0,"styling-mode":"text",text:t.$t("Thêm")},on:{click:t.addRow}}),t._v(" "),n("DxButton",{attrs:{text:t.$t("Lưu"),type:"default","styling-mode":"contained"},on:{click:t.clickAdd}})],1)],1)],1)}),[],!1,null,"4d87e7b1",null);e.default=component.exports},762:function(t,e,n){"use strict";n(736)},763:function(t,e,n){var o=n(131)(!1);o.push([t.i,"#gridContainer[data-v-69cfd8ae]{padding-top:36px}.btn-fix[data-v-69cfd8ae]{position:fixed;z-index:1}.submit[data-v-69cfd8ae]{color:orange}.approve[data-v-69cfd8ae]{color:#090}.button[data-v-69cfd8ae]{font-size:24px;margin-right:12px;cursor:pointer;color:#4d4d4d}.button[data-v-69cfd8ae],.button[data-v-69cfd8ae]:hover{transition:all .2s linear 0s}.button[data-v-69cfd8ae]:hover{font-size:30px;background-color:#ddd;border-radius:50%}",""]),t.exports=o},795:function(t,e,n){"use strict";n.r(e);n(79),n(59),n(78),n(42),n(105),n(66),n(106);var o=n(50),l=(n(169),n(697)),r=n(313),d=n.n(r),c=n(700),h=n(744),m=n(745),f=n(95),v=n(10),x=n.n(v);function C(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var y={components:{DxDataGrid:l.DxDataGrid,DxColumn:l.DxColumn,DxScrolling:l.DxScrolling,DxPager:l.DxPager,DxColumnFixing:l.DxColumnFixing,DxPaging:l.DxPaging,DxHeaderFilter:l.DxHeaderFilter,DxFilterRow:l.DxFilterRow,DxButton:d.a,Popup:c.default,editPurchase:h.default,addPurchase:m.default},data:function(){return{dataGridRefKey:"datagridValid",popupVisible:!1,isAdd:!1}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?C(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):C(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(f.c)("muahang",["muaHangDuAn"])),methods:{reload:function(){var t=this;setTimeout((function(){t.$store.dispatch("muahang/getData")}),200)},clickAdd:function(){this.isAdd=!0,this.popupVisible=!this.popupVisible},clickApprove:function(t){this.$store.dispatch("pheduyet/submitApprove",t.data.id),this.reload()},clickUnApprove:function(t){this.$store.dispatch("pheduyet/unApprove",t.data.id),this.reload()},clickEdit:function(t){this.isAdd=!1,this.popupVisible=!this.popupVisible,this.$store.dispatch("muahang/getEditData",t.data.id),this.$store.dispatch("muahang/checkApprove",t.data.id)},clickDelete:function(t){1==confirm("Do you want to delete?")&&(this.$store.dispatch("muahang/deleteData",t.data.id),this.reload())},clickPrint:function(t){this.$store.dispatch("exportExcel",t.data)},hiddenPopup:function(){this.popupVisible=!this.popupVisible,this.reload()},timestamp:function(t){return x()(t).add(7,"hours").format("HH:mm DD/MM/YYYY")}},created:function(){this.$store.dispatch("muahang/getData")}},D=y,_=(n(762),n(77)),component=Object(_.a)(D,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"row justify-end btn-fix"},[n("DxButton",{attrs:{icon:"mdi mdi-plus",text:t.$t("Tạo mới")},on:{click:t.clickAdd}}),t._v(" "),n("DxButton",{attrs:{icon:"mdi mdi-reload",text:t.$t("Tải lại")},on:{click:t.reload}})],1),t._v(" "),n("DxDataGrid",{ref:t.dataGridRefKey,attrs:{id:"gridContainer","data-source":t.muaHangDuAn,"show-column-lines":!0,"show-row-lines":!0,"show-borders":!0,"row-alternation-enabled":!0,noDataText:t.$t("Không có dữ liệu"),"remote-operations":!0,"allow-column-resizing":!0,"column-auto-width":!0,"hover-state-enabled":!1},scopedSlots:t._u([{key:"cellTemplate2",fn:function(e){var data=e.data;return[n("div",{class:"Đang lập"===data.value?"":"Chờ duyệt"===data.value?"submit":"approve"},[t._v("\n                "+t._s(data.value)+"\n            ")])]}},{key:"buttons-cell",fn:function(e){var data=e.data;return[n("div",{staticClass:"row justify-center"},[n("div",[n("DxButton",{attrs:{icon:"mdi mdi-printer",hint:t.$t("In")},on:{click:function(e){return t.clickPrint(data)}}})],1),t._v(" "),"DANG_TAO"==data.data.approvalState?n("div",[n("DxButton",{attrs:{icon:"mdi mdi-file-sign",hint:t.$t("Phê duyệt mua hàng")},on:{click:function(e){return t.clickApprove(data)}}})],1):n("div",[n("DxButton",{attrs:{icon:"mdi mdi-file-remove",hint:t.$t("Yêu cầu hoàn duyệt")},on:{click:function(e){return t.clickUnApprove(data)}}})],1),t._v(" "),n("div",[n("DxButton",{attrs:{icon:"mdi mdi-eye",hint:t.$t("Xem chi tiết")},on:{click:function(e){return t.clickEdit(data)}}})],1),t._v(" "),n("div",[n("DxButton",{attrs:{icon:"mdi mdi-delete",hint:t.$t("Xoá")},on:{click:function(e){return t.clickDelete(data)}}})],1)])]}}])},[n("DxPaging",{attrs:{"page-size":30}}),t._v(" "),n("DxColumnFixing",{attrs:{enabled:!1}}),t._v(" "),n("DxScrolling",{attrs:{"column-rendering-mode":"virtual"}}),t._v(" "),n("DxPager",{attrs:{visible:!0,"allowed-page-sizes":[15,30,"all"],"show-page-size-selector":!0,"show-info":!0,"show-navigation-buttons":!1}}),t._v(" "),n("DxHeaderFilter",{attrs:{visible:!0,"allow-search":!0}}),t._v(" "),n("DxFilterRow",{attrs:{visible:!0}}),t._v(" "),n("DxColumn",{attrs:{"data-field":"id",caption:t.$t("Số"),alignment:"center","allow-header-filtering":!1}}),t._v(" "),n("DxColumn",{attrs:{"allow-header-filtering":!1,"data-field":"tenNhanVien",caption:t.$t("Họ và tên")}}),t._v(" "),n("DxColumn",{attrs:{"allow-header-filtering":!0,"data-field":"phongBan",caption:t.$t("Phòng ban")}}),t._v(" "),n("DxColumn",{attrs:{"allow-header-filtering":!0,"data-field":"maDuAn",caption:t.$t("Mã dự án")}}),t._v(" "),n("DxColumn",{attrs:{"allow-header-filtering":!1,"data-field":"soThamChieu",caption:t.$t("Số tham chiếu")}}),t._v(" "),n("DxColumn",{attrs:{"data-field":"ngayDeTrinh",caption:t.$t("Ngày đệ trình"),"data-type":"date",format:"dd/MM/yyyy","allow-header-filtering":!1}}),t._v(" "),n("DxColumn",{attrs:{"data-field":"ngayCanHang",caption:t.$t("Ngày cần hàng"),format:"dd/MM/yyyy","data-type":"date","allow-header-filtering":!1}}),t._v(" "),n("DxColumn",{attrs:{"data-field":"thoiDiemDuyet",caption:t.$t("Thời gian duyệt"),format:t.timestamp,"data-type":"date","allow-header-filtering":!1}}),t._v(" "),n("DxColumn",{attrs:{"allow-header-filtering":!0,"data-field":"trangThaiDuyet",caption:t.$t("Trạng thái"),"cell-template":"cellTemplate2"}}),t._v(" "),t._v(" "),n("DxColumn",{attrs:{"allow-header-filtering":!1,width:"auto","cell-template":"buttons-cell"}})],1),t._v(" "),n("popup",{attrs:{showPopup:t.popupVisible,showTitle:!1,closeOut:!1,width:!1===t.isAdd?"90%":"80%"},scopedSlots:t._u([{key:"main",fn:function(){return[!0===t.isAdd?n("addPurchase",{on:{invisible:t.hiddenPopup}}):n("editPurchase",{on:{invisible:t.hiddenPopup}})]},proxy:!0}])})],1)}),[],!1,null,"69cfd8ae",null);e.default=component.exports;installComponents(component,{Popup:n(700).default})}}]);